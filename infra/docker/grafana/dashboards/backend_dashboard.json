{
  "uid": "backend-api-metrics",
  "title": "Backend API Metrics",
  "tags": ["backend", "api"],
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "10s",
  "annotations": {"list": []},
  "time": {"from": "now-30m", "to": "now"},
  "timepicker": {},
  "templating": {"list": []},
  "panels": [
    {
      "id": 1,
      "title": "HTTP Request Rate",
      "type": "timeseries",
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "gridPos": {"x": 0, "y": 0, "w": 12, "h": 8},
      "targets": [
        {
          "expr": "rate(http_requests_total[5m])",
          "legendFormat": "{{method}} {{path}}"
        }
      ]
    },
    {
      "id": 2,
      "title": "HTTP Request Duration (P95)",
      "type": "timeseries",
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "gridPos": {"x": 12, "y": 0, "w": 12, "h": 8},
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))",
          "legendFormat": "p95"
        },
        {
          "expr": "histogram_quantile(0.50, rate(http_request_duration_seconds_bucket[5m]))",
          "legendFormat": "p50"
        }
      ]
    },
    {
      "id": 3,
      "title": "HTTP Status Codes",
      "type": "timeseries",
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "gridPos": {"x": 0, "y": 8, "w": 12, "h": 8},
      "targets": [
        {
          "expr": "rate(http_requests_total{status_code=~\"2..\"}[5m])",
          "legendFormat": "2xx"
        },
        {
          "expr": "rate(http_requests_total{status_code=~\"4..\"}[5m])",
          "legendFormat": "4xx"
        },
        {
          "expr": "rate(http_requests_total{status_code=~\"5..\"}[5m])",
          "legendFormat": "5xx"
        }
      ]
    },
    {
      "id": 4,
      "title": "Database Connections",
      "type": "timeseries",
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "gridPos": {"x": 12, "y": 8, "w": 12, "h": 8},
      "targets": [
        {
          "expr": "db_pool_size",
          "legendFormat": "Pool size"
        },
        {
          "expr": "db_pool_checked_out",
          "legendFormat": "In use"
        }
      ]
    }
  ]
}
